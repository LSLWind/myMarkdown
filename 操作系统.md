### 基本概念

#### 基础概念

操作系统的主要功能是**资源管理**与**运行程序**，OS直接安装在硬件上，屏蔽硬件细节，向上提供统一抽象接口

资源包括硬件与软件资源，资源管理包括处理器管理（进程/线程）、存储管理（内存）、设备管理（I/O)、文件管理

运行程序：编译链接形成可执行文件→外存→内存分配空间→加上PCB控制块形成进程→执行程序

OS的主要特性为并发性、共享性、异步性（并发执行与顺序执行效果一致）、虚拟性（资源虚化）

内核：OS在硬件上的首层抽象，屏蔽硬件细节，向上提供统一抽象接口

系统调用：内核中函数，获取操作系统服务的唯一途径

系统调用过程：请求系统调用→由用户态转换为核心态→发生中断，现场保护→内核（系统）调用，返回

#### OS结构

##### 单体式结构

整个OS为一个大型可执行二进制文件，在内核中以单一程序方式运行

##### 层次式结构

将OS划分为内核与多个模块，垂直排列，为单向调用关系，低层为高层提供服务

##### 客户机/服务器与微内核结构

划分功能模块与微内核，功能模块为服务器进程，用户进程为客户机进程，使用消息传递进行通信，用户进程向服务器进程请求资源，内核管理服务器进程

#### OS运行模型

##### 非进程模式

将OS组织成一个例行程序，用户程序/数据/堆栈+内核程序/数据/堆栈构成进程映像

##### 进程模式

将OS组织成一组系统进程，OS功能由这些系统进程集合提供

### 处理器管理

指令分特权指令与非特权指令

#### 中断

中断：程序执行过程中发生某个事件时，终止CPU当前程序，执行事件

##### 分类

强迫性中断：外部随机事件引起，如电源故障，设备出错等

自愿性中断：程序自己引发的期待事件

外中断：处理器与主存之外的中断

内中断：处理器与主存内部的中断

##### 中断处理

使用硬件+软件实现中断处理，中断寄存器存储中断字，中断字每一位代表一个中断事件，每条指令执行完毕后检查中断字。**中断指令刺激中断源产生中断信号，中断信号置中断字对应位为1，检查中断字发现中断，CPU响应中断请求，中断位置0**

发现中断源，响应中断请求→保护线程→启动中断处理程序

#### CPU状态

分用户态与核心态，核心态又称管态